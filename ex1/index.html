<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Iris Scatterplot</title>
        <script type="text/javascript" src="d3/d3.v3.min.js"></script>
    </head>
    <body>
        <script type="text/javascript">

            var h = 600;
            var w = 600;

            var svg = d3.select("body")
                .append("svg")
                .attr("width", w)
                .attr("height", h);

            d3.csv("iris.csv", function(dataset) {
                console.log(dataset);
                displayScatterplot(dataset);
            })

            function displayScatterplot(dataset) {

                var xScale = d3.scale.linear()
                    .domain([0, d3.max(dataset, function(d) { return d.petal_length; })])
                    .range([w/10, 9*w/10]);

                var yScale = d3.scale.linear()
                    .domain([0, d3.max(dataset, function(d) { return d.petal_width; })])
                    .range([9*h/10, h/10]);

                svg.selectAll(".setosa")
                    .data(dataset.filter(d => d.species == "setosa"))
                    .enter()
                    .append("circle")
                    .attr("class", "setosa")
                    .attr("cx", function(d) {
                            return xScale(d.petal_length);
                        })
                    .attr("cy", function(d) {
                            return yScale(d.petal_width);
                        })
                    .attr("r", 5)
                    .attr("stroke", "black")
                    .attr("fill", "red");

                svg.selectAll(".versicolor")
                    .data(dataset.filter(d => d.species == "versicolor"))
                    .enter()
                    .append("rect")
                    .attr("class", "versicolor")
                    .attr("x", function(d) {
                            return xScale(d.petal_length) - 5;
                        })
                    .attr("y", function(d) {
                            return yScale(d.petal_width) - 5;
                        })
                    .attr("height", 10)
                    .attr("width", 10)
                    .attr("stroke", "black")
                    .attr("fill", "blue");

                svg.selectAll(".virginica")
                    .data(dataset.filter(d => d.species == "virginica"))
                    .enter()
                    .append("path")
                    .attr("class", "virginica")
                    .attr("d", d3.svg.symbol().type("triangle-up"))
                    .attr("transform", function(d) {
                            return "translate(" + xScale(d.petal_length) + "," + yScale(d.petal_width) + ")"; 
                         })
                    .attr("fill", "green")
                    .attr("stroke", "black");
            }

        </script>
    </body>
</html>